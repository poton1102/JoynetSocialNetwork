{"ast":null,"code":"var _jsxFileName = \"D:\\\\JoynetSocialNetwork\\\\do-an-fe\\\\src\\\\components\\\\message\\\\ScrollableChat.js\",\n  _s = $RefreshSig$();\nimport { Typography } from '@mui/material';\nimport Avatar from '@mui/material/Avatar';\nimport Tooltip from '@mui/material/Tooltip';\nimport useTheme from '@mui/material/styles/useTheme';\nimport React, { useRef, useState, useEffect } from 'react';\nimport { useSelector } from \"react-redux\";\nimport ScrollableFeed from \"react-scrollable-feed\";\nimport { isLastMessage, isSameSender, isSameSenderMargin, isSameUser } from \"../../utils/chatLogic\";\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet timer;\nconst ScrollableChat = /*#__PURE__*/React.forwardRef(_c = _s((_ref, ref) => {\n  _s();\n  let {\n    messages,\n    istyping,\n    fetchMoreRef,\n    hasMoreMessages\n  } = _ref;\n  const [lastMessage, setLassMessage] = useState();\n  const {\n    auth\n  } = useSelector(state => state);\n  const user = auth.user;\n  const {\n    palette\n  } = useTheme();\n  const messagesEndRef = useRef(null);\n  useEffect(() => {\n    messagesEndRef.current.scrollIntoView({\n      behavior: 'smooth',\n      block: 'end'\n    });\n  }, [messages]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [hasMoreMessages && /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: fetchMoreRef,\n      children: \"Load more\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 33\n    }, this), messages.map((m, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      ref: i === messages.length - 1 ? setLassMessage : null,\n      children: [(isSameSender(messages, m, i, user._id) || isLastMessage(messages, i, user._id)) && /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: m.sender.username,\n        placement: \"bottom-start\",\n        arrow: true,\n        children: /*#__PURE__*/_jsxDEV(Avatar, {\n          sx: {\n            width: 24,\n            height: 24,\n            cursor: 'pointer',\n            marginTop: '8px',\n            marginRight: '9px'\n          },\n          alt: m.sender.username,\n          src: m.sender.avatar\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: moment(m.createdAt).fromNow(),\n        placement: \"bottom-start\",\n        arrow: true,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            backgroundColor: `${m.sender._id === user._id ? palette.primary.light : palette.primary.main}`,\n            marginLeft: isSameSenderMargin(messages, m, i, user._id),\n            marginTop: isSameUser(messages, m, i, user._id) ? 3 : 10,\n            borderRadius: \"20px\",\n            padding: \"5px 15px\",\n            maxWidth: \"75%\"\n          },\n          children: m.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }, this)]\n    }, m._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 17\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: messagesEndRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}, \"VC46SzAt1TeqLLZJRdUn5DW6XiE=\", false, function () {\n  return [useSelector, useTheme];\n}));\n_c2 = ScrollableChat;\nexport default ScrollableChat;\nvar _c, _c2;\n$RefreshReg$(_c, \"ScrollableChat$React.forwardRef\");\n$RefreshReg$(_c2, \"ScrollableChat\");","map":{"version":3,"names":["Typography","Avatar","Tooltip","useTheme","React","useRef","useState","useEffect","useSelector","ScrollableFeed","isLastMessage","isSameSender","isSameSenderMargin","isSameUser","moment","jsxDEV","_jsxDEV","Fragment","_Fragment","timer","ScrollableChat","forwardRef","_c","_s","_ref","ref","messages","istyping","fetchMoreRef","hasMoreMessages","lastMessage","setLassMessage","auth","state","user","palette","messagesEndRef","current","scrollIntoView","behavior","block","children","fileName","_jsxFileName","lineNumber","columnNumber","map","m","i","style","display","length","_id","title","sender","username","placement","arrow","sx","width","height","cursor","marginTop","marginRight","alt","src","avatar","createdAt","fromNow","backgroundColor","primary","light","main","marginLeft","borderRadius","padding","maxWidth","content","_c2","$RefreshReg$"],"sources":["D:/JoynetSocialNetwork/do-an-fe/src/components/message/ScrollableChat.js"],"sourcesContent":["import { Typography } from '@mui/material';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport useTheme from '@mui/material/styles/useTheme';\r\nimport React, { useRef, useState, useEffect } from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport ScrollableFeed from \"react-scrollable-feed\";\r\nimport {\r\n    isLastMessage,\r\n    isSameSender,\r\n    isSameSenderMargin,\r\n    isSameUser,\r\n} from \"../../utils/chatLogic\";\r\nimport moment from 'moment'\r\n\r\nlet timer;\r\n\r\nconst ScrollableChat = React.forwardRef(({ messages, istyping, fetchMoreRef, hasMoreMessages }, ref) => {\r\n    const [lastMessage, setLassMessage] = useState()\r\n\r\n    const { auth } = useSelector(state => state);\r\n    const user = auth.user;\r\n    const { palette } = useTheme()\r\n\r\n    const messagesEndRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        messagesEndRef.current.scrollIntoView({ behavior: 'smooth', block: 'end' });\r\n    }, [messages]);\r\n\r\n\r\n    return (\r\n        <>\r\n            {hasMoreMessages && <div ref={fetchMoreRef}>Load more</div>}\r\n            {messages.map((m, i) => (\r\n                <div style={{ display: \"flex\" }} key={m._id} ref={i === messages.length - 1 ? setLassMessage : null}>\r\n                    {(isSameSender(messages, m, i, user._id) ||\r\n                        isLastMessage(messages, i, user._id)) && (\r\n                            <Tooltip title={m.sender.username} placement=\"bottom-start\" arrow>\r\n                                <Avatar\r\n                                    sx={{\r\n                                        width: 24, height: 24, cursor: 'pointer', marginTop: '8px',\r\n                                        marginRight: '9px',\r\n                                    }}\r\n                                    alt={m.sender.username}\r\n                                    src={m.sender.avatar}\r\n                                />\r\n                            </Tooltip>\r\n                        )}\r\n                    <Tooltip title={moment(m.createdAt).fromNow()} placement=\"bottom-start\" arrow>\r\n                        <span\r\n                            style={{\r\n                                backgroundColor: `${m.sender._id === user._id ? palette.primary.light : palette.primary.main\r\n                                    }`,\r\n                                marginLeft: isSameSenderMargin(messages, m, i, user._id),\r\n                                marginTop: isSameUser(messages, m, i, user._id) ? 3 : 10,\r\n                                borderRadius: \"20px\",\r\n                                padding: \"5px 15px\",\r\n                                maxWidth: \"75%\",\r\n                            }}\r\n                        >\r\n                            {m.content}\r\n                        </span>\r\n\r\n                    </Tooltip>\r\n                </div>\r\n            ))}\r\n            <div ref={messagesEndRef} />\r\n            {/* {istyping && <Typography component='p'>... is typing</Typography>} */}\r\n        </>\r\n    );\r\n});\r\n\r\nexport default ScrollableChat;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}