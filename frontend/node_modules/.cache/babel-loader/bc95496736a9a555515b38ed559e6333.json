{"ast":null,"code":"var _jsxFileName = \"D:\\\\JoynetSocialNetwork\\\\do-an-fe\\\\src\\\\components\\\\message\\\\CallModal.js\",\n  _s = $RefreshSig$();\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Avatar from \"../Avatar\";\nimport { useEffect, useState } from \"react\";\nimport { GLOBALTYPES } from \"../../redux/actions/globalTypes\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction CallModal() {\n  _s();\n  const {\n    call,\n    auth\n  } = useSelector(state => state);\n  const dispatch = useDispatch();\n  const [mins, setMins] = useState(0);\n  const [second, setSecond] = useState(0);\n  const [total, setTotal] = useState(0);\n  const [answer, setAnswer] = useState(false);\n\n  //setTime\n  useEffect(() => {\n    const setTime = () => {\n      setTotal(t => t + 1);\n      setTimeout(setTime, 1000);\n    };\n    setTime();\n    return () => setTotal(0);\n  }, []);\n  useEffect(() => {\n    setSecond(total % 60);\n    setMins(parseInt(total / 60));\n  }, [total]);\n\n  //end call\n  const handleEndClick = () => {\n    dispatch({\n      type: GLOBALTYPES.CALL,\n      payload: null\n    });\n  };\n  useEffect(() => {\n    if (answer) {\n      setTotal(0);\n    }\n    const timer = setTimeout(() => {\n      dispatch({\n        type: GLOBALTYPES.CALL,\n        payload: null\n      });\n    }, 15000);\n    return () => clearTimeout(timer);\n  }, [dispatch, answer]);\n\n  //answer call\n  const handleAnswer = () => {\n    setAnswer(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"call_modal\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"call_box\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        style: {\n          padding: '40px 0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          src: call.avatar,\n          size: \"supper-avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: call.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: call.fullname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: call.video ? /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"calling video...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"calling audio...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timer\",\n        children: [/*#__PURE__*/_jsxDEV(\"small\", {\n          children: mins.toString().length < 2 ? '0' + mins : mins\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          children: \":\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          children: second.toString().length < 2 ? '0' + second : second\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"call_menu\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"material-icons text-danger\",\n          onClick: handleEndClick,\n          children: \"call_end\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this),\n        /*#__PURE__*/\n        // (call.recipient === auth.user._id) &&\n        _jsxDEV(_Fragment, {\n          children: call.video ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"material-icons text-success\",\n            onClick: handleAnswer,\n            children: \"videocam\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 39\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"material-icons text-success\",\n            onClick: handleAnswer,\n            children: \"call\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 37\n          }, this)\n        }, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_s(CallModal, \"oSVFF0aixygpDRtaIya6QWYKB38=\", false, function () {\n  return [useSelector, useDispatch];\n});\n_c = CallModal;\nexport default CallModal;\nvar _c;\n$RefreshReg$(_c, \"CallModal\");","map":{"version":3,"names":["useDispatch","useSelector","Avatar","useEffect","useState","GLOBALTYPES","jsxDEV","_jsxDEV","Fragment","_Fragment","CallModal","_s","call","auth","state","dispatch","mins","setMins","second","setSecond","total","setTotal","answer","setAnswer","setTime","t","setTimeout","parseInt","handleEndClick","type","CALL","payload","timer","clearTimeout","handleAnswer","className","children","style","padding","src","avatar","size","fileName","_jsxFileName","lineNumber","columnNumber","username","fullname","video","toString","length","onClick","_c","$RefreshReg$"],"sources":["D:/JoynetSocialNetwork/do-an-fe/src/components/message/CallModal.js"],"sourcesContent":["import { useDispatch, useSelector } from \"react-redux\";\r\nimport Avatar from \"../Avatar\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { GLOBALTYPES } from \"../../redux/actions/globalTypes\";\r\n\r\nfunction CallModal() {\r\n    const { call, auth } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n    const [mins, setMins] = useState(0)\r\n    const [second, setSecond] = useState(0)\r\n    const [total, setTotal] = useState(0)\r\n\r\n\r\n    const [answer, setAnswer] = useState(false)\r\n\r\n    //setTime\r\n    useEffect(() => {\r\n        const setTime = () => {\r\n            setTotal(t => t + 1)\r\n            setTimeout(setTime, 1000)\r\n        }\r\n        setTime()\r\n\r\n        return () => setTotal(0)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        setSecond(total % 60)\r\n        setMins(parseInt(total / 60))\r\n    }, [total])\r\n\r\n    //end call\r\n    const handleEndClick = () => {\r\n        dispatch({ type: GLOBALTYPES.CALL, payload: null })\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (answer) {\r\n            setTotal(0)\r\n        }\r\n        const timer = setTimeout(() => {\r\n            dispatch({ type: GLOBALTYPES.CALL, payload: null })\r\n        }, 15000)\r\n        return () => clearTimeout(timer)\r\n    }, [dispatch, answer])\r\n\r\n    //answer call\r\n    const handleAnswer = () => {\r\n        setAnswer(true)\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"call_modal\">\r\n            <div className=\"call_box\">\r\n                <div className=\"text-center\" style={{ padding: '40px 0' }}>\r\n                    <Avatar src={call.avatar} size=\"supper-avatar\" />\r\n                    <h4>{call.username}</h4>\r\n                    <h6>{call.fullname}</h6>\r\n                    <div>\r\n                        {\r\n                            call.video ?\r\n                                <span>calling video...</span>\r\n                                : <span>calling audio...</span>\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className=\"timer\">\r\n                    <small>{mins.toString().length < 2 ? '0' + mins : mins}</small>\r\n                    <small>:</small>\r\n                    <small>{second.toString().length < 2 ? '0' + second : second}</small>\r\n                </div>\r\n\r\n                <div className=\"call_menu\">\r\n                    <button className=\"material-icons text-danger\"\r\n                        onClick={handleEndClick}>\r\n                        call_end\r\n                    </button>\r\n\r\n                    {\r\n                        // (call.recipient === auth.user._id) &&\r\n                        <>\r\n                            {\r\n                                call.video\r\n                                    ? <button className=\"material-icons text-success\"\r\n                                        onClick={handleAnswer}\r\n                                    >\r\n                                        videocam\r\n                                    </button>\r\n                                    :\r\n                                    <button className=\"material-icons text-success\"\r\n                                        onClick={handleAnswer}\r\n                                    >\r\n                                        call\r\n                                    </button>\r\n                            }\r\n                        </>\r\n                    }\r\n                </div>\r\n\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default CallModal;"],"mappings":"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"},"metadata":{},"sourceType":"module"}